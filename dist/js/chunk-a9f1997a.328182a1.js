(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a9f1997a"],{"0b01":function(t,n,s){"use strict";var a=s("88c7"),e=s.n(a);e.a},"2b2e":function(t,n,s){"use strict";var a=function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"person_centered"},[s("span",{staticClass:"iconfont iconjiantou",on:{click:function(n){return t.$router.back()}}}),s("strong",{staticClass:"centered"},[t._v(t._s(t.title))]),t.shouyeShow?s("span",{staticClass:"iconfont iconshouye",on:{click:function(n){return t.$router.push("/")}}}):s("span",{staticClass:"iconfont iconshouye",staticStyle:{opacity:"0"}})])},e=[],o={props:["title","shouyeShow"]},i=o,c=(s("5880"),s("2877")),r=Object(c["a"])(i,a,e,!1,null,"f75b0014",null);n["a"]=r.exports},"34a6":function(t,n,s){"use strict";var a=function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"listbar"},[s("router-link",{staticClass:"list_son",attrs:{to:t.path||""}},[s("span",[t._v(t._s(t.label))]),s("span",{staticClass:"tips"},[t._v(" "+t._s(t.tips)+" "),s("span",{staticClass:"iconfont iconjiantou1"})])])],1)},e=[],o={props:["label","tips","path"]},i=o,c=(s("dea7"),s("2877")),r=Object(c["a"])(i,a,e,!1,null,"dc1d7862",null);n["a"]=r.exports},5880:function(t,n,s){"use strict";var a=s("bf50"),e=s.n(a);e.a},"88c7":function(t,n,s){},a697:function(t,n,s){},bf50:function(t,n,s){},dea7:function(t,n,s){"use strict";var a=s("a697"),e=s.n(a);e.a},fb5e:function(t,n,s){"use strict";s.r(n);var a=function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",[s("NavigateBar",{attrs:{title:"编辑资料"}}),s("div",{staticClass:"profile"},[s("img",{attrs:{src:t.$axios.defaults.baseURL+t.userInfo.head_img,alt:""}}),s("van-uploader",{staticClass:"uploader",attrs:{"after-read":t.afterRead}})],1),s("Listbar",{attrs:{label:"昵称",tips:t.userInfo.nickname},nativeOn:{click:function(n){t.show=!0}}}),s("van-dialog",{attrs:{title:"昵称","show-cancel-button":""},on:{confirm:t.handleShow},model:{value:t.show,callback:function(n){t.show=n},expression:"show"}},[s("van-field",{model:{value:t.nickname,callback:function(n){t.nickname=n},expression:"nickname"}})],1),s("Listbar",{attrs:{label:"密码",tips:"******"},nativeOn:{click:function(n){t.show1=!0}}}),s("van-dialog",{attrs:{title:"密码","show-cancel-button":""},on:{confirm:t.passwordShow},model:{value:t.show1,callback:function(n){t.show1=n},expression:"show1"}},[s("van-field",{attrs:{type:"password"},model:{value:t.password,callback:function(n){t.password=n},expression:"password"}})],1),s("Listbar",{attrs:{label:"性别",tips:["女","男"][t.userInfo.gender]},nativeOn:{click:function(n){t.show2=!0}}}),s("van-action-sheet",{attrs:{actions:t.actions,"close-on-click-action":""},on:{select:t.onSelect},model:{value:t.show2,callback:function(n){t.show2=n},expression:"show2"}})],1)},e=[],o=s("2b2e"),i=s("34a6"),c={data:function(){return{userJson:{},userInfo:{},nickname:"",password:"",show:!1,show1:!1,show2:!1,actions:[{name:"男",value:1},{name:"女",value:0}]}},mounted:function(){var t=this,n=JSON.parse(localStorage.getItem("userInfo"));console.log("shuj",n),this.userJson=n,this.$axios({url:"/user/"+n.user.id,headers:{Authorization:n.token}}).then((function(n){var s=n.data.data;t.userInfo=s,t.nickname=s.nickname,console.log(t.userInfo)}))},methods:{afterRead:function(t){var n=this,s=new FormData;s.append("file",t.file),this.$axios({url:"/upload",method:"post",headers:{Authorization:this.userJson.token},data:s}).then((function(t){console.log("数据",n.userInfo);var s=t.data.data.url;n.userInfo.head_img=s,console.log(s),n.handleEdit({head_img:s})}))},handleEdit:function(t){var n=this;return this.$axios({url:"/user_update/"+this.userInfo.id,headers:{Authorization:this.userJson.token},method:"post",data:t}).then((function(t){console.log("编辑成功",t),n.$toast.success("修改成功")}))},handleShow:function(){var t=this,n=this.handleEdit({nickname:this.nickname});n.then((function(){t.userInfo.nickname=t.nickname}))},passwordShow:function(){this.handleEdit({password:this.password})},onSelect:function(t){console.log("xinbie",t.value),this.handleEdit({gender:t.value}),this.userInfo.gender=t.value}},components:{NavigateBar:o["a"],Listbar:i["a"]}},r=c,l=(s("0b01"),s("2877")),u=Object(l["a"])(r,a,e,!1,null,"476fd4f0",null);n["default"]=u.exports}}]);
//# sourceMappingURL=chunk-a9f1997a.328182a1.js.map